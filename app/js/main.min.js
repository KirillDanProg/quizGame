const box=document.querySelector(".quiz__box"),start=document.querySelector(".start"),scale=document.querySelector(".scale"),urlQuiz="https://the-trivia-api.com/api/questions?limit=1";let arr=[],count=100,score=0,timer=!0,limit=null,correctAnswer="";function getQuiz(){if(limit++,limit<=10)fetch(urlQuiz).then((e=>e.json())).then((e=>e.forEach((e=>{box.innerHTML=nextQn(e)})))).then((()=>{scale.style.display="block",scaleStart()})),scale.style.backgroundColor="green";else{scale.style.display="none",box.innerHTML=`Your score: ${score}`;let e=document.createElement("div");e.innerHTML="try again",e.classList.add("try-again"),box.appendChild(e),e.addEventListener("click",getQuiz),limit=0,score=0}}let arrNum=[],i=0;function getNum(){for(;arrNum.length<4;){let e=Math.floor(4*Math.random());arrNum.includes(e)||arrNum.push(e),i++}return arrNum}function nextQn(e){correctAnswer=e.correctAnswer;let t=e.incorrectAnswers,r=t;return r.splice(Math.floor(Math.random()*t.length+1),0,correctAnswer),box.innerHTML="",`\n  <div class="question">${e.question}</div>\n   ${r.map((e=>`<div class="answer">${e}</div>`)).join("")}\n    `}function checkAnswer(e){let t=e.target;t.innerHTML!==correctAnswer&&t.classList.contains("answer")?(t.style.backgroundColor="red",timer=!1,getQuiz()):t.innerHTML===correctAnswer&&t.classList.contains("answer")&&(t.style.backgroundColor="green",score++,timer=!1,getQuiz())}function scaleStart(){count=100;let e=setInterval((()=>{count-=.1,count<50&&(scale.style.backgroundColor="yellow"),count<20&&(scale.style.backgroundColor="red"),count<1&&(clearInterval(e),timer=!0,getQuiz()),scale.style.width=`${count}%`}),20);timer||clearInterval(e),scale.style.backgroundColor="green",scale.classList.add("scale-active")}start.addEventListener("click",getQuiz),box.addEventListener("click",checkAnswer);