const box=document.querySelector(".quiz__box"),start=document.querySelector(".start"),scale=document.querySelector(".scale"),urlQuiz="https://the-trivia-api.com/api/questions?limit=1";let arr=[],count=100,score=0,timer=!0,limit=null,correctAnswer="",arrNum=[],i=0,intervalID=null;function getQuiz(){limit++,limit<=10?(fetch(urlQuiz).then((e=>e.json())).then((e=>e.forEach((e=>{box.innerHTML=nextQn(e)})))).then((()=>{scale.style.display="block",console.log(correctAnswer),scaleStart(),box.addEventListener("click",checkAnswer)})),scale.style.backgroundColor="green"):showResult()}function showResult(){scale.style.display="none",box.innerHTML=`Your score: ${score}`;let e=document.createElement("div");e.innerHTML="try again",e.classList.add("try-again"),box.appendChild(e),e.addEventListener("click",getQuiz),limit=0,score=0}function getNum(){for(;arrNum.length<4;){let e=Math.floor(4*Math.random());arrNum.includes(e)||arrNum.push(e),i++}return arrNum}function nextQn(e){box.innerHTML="",correctAnswer=e.correctAnswer;let r=e.incorrectAnswers,t=r;return t.splice(Math.floor(Math.random()*r.length+1),0,correctAnswer),`\n  <div class="question">${e.question}</div>\n   ${t.map((e=>`<div class="answer">${e}</div>`)).join("")}\n    `}function checkAnswer(e){let r=e.target;r.innerHTML!==correctAnswer&&r.classList.contains("answer")?(r.style.backgroundColor="red",showCorrectAnswer()):r.innerHTML===correctAnswer&&r.classList.contains("answer")&&(r.style.backgroundColor="green",score++,clearInterval(intervalID),getQuiz())}function showCorrectAnswer(){clearInterval(intervalID),box.removeEventListener("click",checkAnswer),box.innerHTML+=`\n  <div class="correct-answer">The answer is: ${correctAnswer}</div>\n  `,setTimeout((()=>getQuiz()),5e3)}function scaleStart(){count=100,intervalID=setInterval((()=>{count-=.1,count<50&&(scale.style.backgroundColor="yellow"),count<20&&(scale.style.backgroundColor="red"),count<1&&(clearInterval(intervalID),timer=!0,getQuiz()),scale.style.width=`${count}%`}),20),timer||clearInterval(intervalID),scale.style.backgroundColor="green",scale.classList.add("scale-active")}start.addEventListener("click",getQuiz);